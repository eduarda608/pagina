:root{
  --track-w: min(1100px, 95vw);
  --track-h: 420px;
  --lane-gap: 10px;
  --finish-w: 24px;
  --grass: #2fa14f;
  --asphalt: #5f6368;
  --asphalt-tex1: #676b71;
  --asphalt-tex2: #595d62;
  --white: #fff;
  --shadow: rgba(0,0,0,.25);
  --red1: #ff3b3b;
  --red2: #c01818;
  --blue1:#2f7aff;
  --blue2:#1346b8;
}

*{ box-sizing: border-box; }
html,body{ height:100%; margin:0; font-family: system-ui, Roboto, Arial, sans-serif; background: #0e1512; color:#fff; }

#track{
  position: relative;
  width: var(--track-w);
  height: var(--track-h);
  margin: 24px auto;
  border-radius: 14px;
  overflow: hidden;
  /* laterais (grama) */
  background:
    /* grama topo */
    linear-gradient(var(--grass), var(--grass)) top/100% 24px no-repeat,
    /* grama baixo */
    linear-gradient(var(--grass), var(--grass)) bottom/100% 24px no-repeat,
    /* asfalto texturizado */
    repeating-linear-gradient(
      90deg,
      var(--asphalt) 0 10px,
      var(--asphalt-tex1) 10px 20px,
      var(--asphalt-tex2) 20px 30px
    );
  box-shadow: 0 18px 40px rgba(0,0,0,.45);
}

/* faixas das pistas */
.lane{
  position: absolute;
  left: 0; right: var(--finish-w);
  height: calc(50% - 12px);
  display: flex; align-items: center;
  border-top: 4px solid rgba(255,255,255,.8);
  border-bottom: 4px solid rgba(255,255,255,.8);
}
.lane-top{ top: 24px; }
.lane-bottom{ bottom: 24px; }

/* traces centrais (pontilhado) */
.lane::after{
  content:"";
  position:absolute; left: 0; right: var(--finish-w);
  height: 6px; top: calc(50% - 3px);
  background: repeating-linear-gradient(
    to right,
    transparent 0 18px,
    #fff 18px 46px
  );
  opacity: .9;
}

/* linha de chegada */
#finish{
  position: absolute;
  top: 0; right: 0;
  width: var(--finish-w);
  height: 100%;
  background: rgba(255,255,255,.9);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.15);
}
#finish .flag{
  position: absolute; top: 24px; bottom: 24px; left: 0; right: 0;
  background:
    linear-gradient(90deg, rgba(0,0,0,.1), rgba(0,0,0,0)),
    repeating-linear-gradient(
      0deg,
      #000 0 12px, #fff 12px 24px
    );
  filter: contrast(120%);
}

/* carros (mix cartoon + real) */
.car{
  position: absolute;
  left: 16px; /* posição inicial */
  width: 120px; height: 64px;
  transform: translateX(0);
}
.car .shadow{
  position: absolute; inset: 8px 6px 0 6px; border-radius: 14px;
  background: radial-gradient(ellipse at 50% 70%, rgba(0,0,0,.35), rgba(0,0,0,0) 60%);
  filter: blur(3px);
}
.car .body{
  position: absolute; inset: 0;
  border-radius: 16px;
  box-shadow: inset 0 0 0 2px rgba(255,255,255,.2), 0 6px 12px var(--shadow);
}
.car-red .body{
  background: linear-gradient(180deg, var(--red1), var(--red2));
}
.car-blue .body{
  background: linear-gradient(180deg, var(--blue1), var(--blue2));
}
.car .glass{
  position: absolute; left: 18px; right: 26px; top: 10px; height: 26px;
  border-radius: 10px;
  background: linear-gradient(180deg, #eaf5ff, #9cc1df);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.12);
}
.car .light{
  position: absolute; top: 10px; width: 10px; height: 10px; border-radius: 50%;
  background: radial-gradient(circle, #ffd27a, #e3a83c);
  box-shadow: 0 0 10px 2px #ffc868aa;
}
.car .light.left{ left: 6px; }
.car .light.right{ left: 20px; }
.car .wheel{
  position: absolute; bottom: -8px; width: 22px; height: 22px; border-radius: 50%;
  background: radial-gradient(circle at 40% 40%, #222, #000);
  box-shadow: inset 0 0 0 3px #333;
}
.car .wheel.front{ right: 14px; }
.car .wheel.back{ left: 14px; }

/* vibração leve quando acelerando */
.car.accel{
  animation: rumble .08s linear infinite;
}
@keyframes rumble {
  0% { transform: translateX(var(--x, 0)) translateY(0); }
  50%{ transform: translateX(var(--x, 0)) translateY(-1px); }
  100%{ transform: translateX(var(--x, 0)) translateY(0); }
}

/* HUD */
#hud{
  width: var(--track-w);
  margin: 8px auto 0;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 8px;
}
.badge{
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.15);
  padding: 8px 12px; border-radius: 999px;
  text-align: center;
}
.howto{ text-align:center; opacity:.85; }

/* overlays */
.overlay{
  position: fixed; inset: 0;
  display: grid; place-items: center;
  background: rgba(0,0,0,.55);
  opacity: 0; pointer-events: none; transition: .2s;
}
.overlay.visible{ opacity: 1; pointer-events: auto; }
.panel{
  width: min(520px, 92vw); background: #141a18; color:#fff;
  border: 1px solid rgba(255,255,255,.15);
  border-radius: 14px; padding: 22px;
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
}
.panel h1, .panel h2{ margin: 0 0 10px; }
.panel form{ display: grid; gap: 10px; margin-top: 6px; }
.panel input{
  padding: 10px 12px; border-radius: 10px; border: 1px solid #2b3430; background: #0c120f; color:#fff;
}
.panel button{
  padding: 10px 14px; border-radius: 10px; border: 0;
  background: linear-gradient(90deg,#2f7aff,#38c4a7);
  color:#fff; font-weight: 700; cursor: pointer;
}
.actions{ display: flex; gap: 10px; }
.actions button{
  flex: 1 1 auto;
  padding: 10px 14px; border-radius: 10px; border: 0; cursor: pointer;
  background: #2f7aff; color:#fff; font-weight: 700;
}
.actions button#change-names{ background:#38c4a7; }
